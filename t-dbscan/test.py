import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Ellipse, Circle
from math import radians, cos, sin, asin, sqrt
import random


# print(np.random.randint(0, 10))
# P_1 = set([i for i in range(30)])
# print(P_1)
# lst = list(P_1)
# print(lst)
#
# o = 1
# q = [o]
# print(q)

# x0 = 0.697
# y0 = 0.46
# x = np.arange(x0-0.15, x0+0.15, 0.05)
# y = np.arange(y0-0.15, y0+0.15, 0.05)
# # x=y=np.arange(-4, 4, 0.1)
# x, y = np.meshgrid(x, y)
# print(x)
# print(y)
# plt.contour(x, y, x**2 + y**2, [0.15**2])
# plt.axis("scaled")
# plt.show()

# cir1 = Circle(xy=(1, 1), radius=2, alpha=0.2)
# fig = plt.figure()
# ax = fig.add_subplot(111)
# ax.add_patch(cir1)
#
# # x, y = 1, 1
# # ax.plot(x, y, "ro")
# plt.axis('scaled')
# plt.show()

# x0 = 0.697
# y0 = 0.46
# r = 0.15
# theta = np.arange(0, 2 * np.pi, 0.01)
# x = x0 + r * np.cos(theta)
# y = y0 + r * np.sin(theta)
# plt.plot(x, y)
# plt.axis("equal")
# plt.show()

# Ck = set()
# x = [1, 2, 3, 4]
# y = 4
# Ck.add(y)
# print(Ck)
# Ck = Ck | set(x)
# print(Ck)
# print(list(Ck))
# x = [1, 2, 3, 4]
# print(min(x))

# 根据经纬度计算距离
# lng1 = 120.186138
# lat1 = 30.190633
# lng2 = 120.250911
# lat2 = 30.317908
# lng1, lat1, lng2, lat2 = map(radians, [lng1, lat1, lng2, lat2])
# dlon = lng2 -lng1
# dlat = lat2 - lat1
# x = sin(dlat/2) ** 2 + cos(lat1) * cos(lat2) * sin(dlon/2) ** 2
# dis = 2 * asin(sqrt(x)) * 6371*1000
# print(dis)

# 随机产生数据
filename = "/home/zhanghao/projectfile/demo_01/dbscan/data_100000.txt"
with open(filename, "w") as f:
    for i in range(100000):
        lng = random.randint(119800000, 120530000) / float(1000000)
        lat = random.randint(30000000, 30560000) / float(1000000)
        timestamp = random.randint(1534316121000, 1534748121000)
        strg = str(i) + "," + str(lng) + "," + str(lat) + "," + str(timestamp) + "\n"
        f.write(strg)

# 读取数据
# filename = "/home/zhanghao/projectfile/demo_01/dbscan/data.txt"
# arr = []
# with open(filename) as f:
#     lines = f.readlines()
#     for line in lines:
#         a1 = line.strip().split(",")
#         arr.append((a1[1], a1[2], a1[3]))
# print(arr[0:2])
#
# # 数据处理成（x1, x2）列表的形式
# dataset = [(float(i[0]), float(i[1]), int(i[2])) for i in arr]
# dataset.sort(key=lambda x:x[2])
# print("dataset: ", dataset[0:10])


# print(lng)
# print(lat)
# print(timestamp)

# list1 = [3584, 4098, 5124, 5637, 8196, 7, 2567, 5644, 3086, 8209, 2578, 4628, 3607, 2584, 2075, 540, 2589, 3612, 4124, 6691, 8739, 2086, 5159, 5160, 8231, 3626, 43, 8742, 6217, 8241, 2098, 2099, 5172, 7219, 9269, 8247, 2616, 9781, 2106, 6203, 1596, 6204, 2110, 575, 7227, 3137, 2626, 7228, 9787, 2631, 9580, 1609, 1610, 3659, 5193, 5197, 3662, 79, 2640, 4688, 2642, 5706, 5204, 5710, 6222, 3159, 6741, 7255, 9582, 6236, 6237, 2655, 6239, 7777, 5220, 6248, 8808, 9321, 8811, 6253, 5230, 5743, 8302, 113, 2161, 6259, 7284, 8818, 4216, 8314, 4095, 124, 8980, 1152, 4224, 7297, 9858, 9860, 2694, 647, 4232, 4742, 9862, 4237, 3726, 8334, 6288, 4755, 4247, 9291, 7837, 158, 671, 7839, 3745, 674, 9292, 7847, 9899, 5293, 9390, 4783, 5297, 7861, 3255, 4280, 7864, 9917, 4798, 9921, 4802, 4291, 4805, 9926, 2247, 3784, 6343, 8910, 2257, 8402, 9939, 2260, 3797, 5333, 8409, 732, 3292, 3806, 8414, 737, 3302, 8936, 8937, 746, 3823, 3314, 2804, 3828, 4341, 7413, 6904, 7928, 6909, 3326, 2815, 7424, 8957, 8961, 3843, 772, 3844, 5382, 2823, 7427, 7429, 7433, 7437, 2831, 6927, 3857, 7441, 4371, 3860, 2837, 7442, 8471, 3864, 4376, 8977, 3355, 7452, 2333, 2850, 803, 1828, 4899, 1318, 2855, 3368, 6439, 6949, 6951, 7461, 8488, 9002, 8495, 5424, 9004, 1330, 1844, 6453, 9527, 9017, 826, 1342, 1344, 9024, 1347, 5955, 9029, 1862, 4938, 3405, 849, 9557, 1878, 7511, 3416, 9558, 4954, 5978, 9559, 3933, 8542, 9564, 5474, 9636, 4964, 7012, 9062, 9573, 5480, 2921, 3946, 6505, 8042, 1389, 3437, 9069, 5488, 3953, 9074, 9075, 7028, 7541, 2934, 7031, 6008, 7544, 9596, 7037, 1406, 3967, 9599, 4993, 9089, 9603, 900, 2951, 7047, 9095, 907, 6540, 7053, 9104, 8593, 6546, 3988, 7061, 406, 6550, 2458, 2459, 5532, 3997, 5536, 3489, 2978, 9120, 420, 933, 4005, 6052, 5544, 6055, 8615, 4011, 2476, 8620, 8110, 1455, 3503, 5552, 4018, 9135, 9136, 5557, 8118, 9138, 5560, 7097, 5562, 1468, 9149, 3007, 6080, 3009, 9151, 3012, 5065, 972, 2511, 9168, 2005, 2008, 7132, 6625, 490, 9707, 2543, 9711, 497, 6647, 1018, 4603, 1533, 3583]
# set1 = set(list1)
# list2 = [3584, 4098, 5124, 8196, 5637, 7, 2567, 5644, 3086, 8209, 2578, 4628, 3607, 2584, 2075, 540, 3612, 4124, 2589, 6691, 8739, 2086, 8742, 5159, 8231, 5160, 3626, 43, 8241, 2098, 2099, 7219, 5172, 9269, 9781, 8247, 2616, 2106, 6203, 7227, 9787, 1596, 6204, 7228, 2110, 575, 3137, 2626, 2631, 1609, 5193, 6217, 1610, 5706, 3659, 9291, 9292, 5197, 3662, 5710, 6222, 79, 2640, 4688, 2642, 5204, 6741, 3159, 7255, 6236, 6237, 2655, 6239, 7777, 5220, 6248, 8808, 9321, 8811, 6253, 5230, 8302, 5743, 113, 2161, 8818, 6259, 7284, 4216, 8314, 124, 1152, 4224, 7297, 9858, 9860, 2694, 4742, 9862, 647, 4232, 4237, 3726, 8334, 6288, 4755, 4247, 7837, 158, 671, 7839, 3745, 674, 7847, 9899, 5293, 9390, 4783, 5297, 7861, 3255, 4280, 7864, 9917, 4798, 9921, 4802, 4291, 4805, 9926, 2247, 6343, 3784, 8910, 2257, 8402, 9939, 2260, 3797, 5333, 8409, 732, 3292, 3806, 8414, 737, 3299, 3302, 8936, 8937, 746, 3823, 3314, 2804, 3828, 4341, 7413, 6904, 7928, 6909, 8957, 3326, 2815, 7424, 8961, 3843, 7427, 772, 3844, 7429, 5382, 2823, 7433, 7437, 2831, 6927, 3857, 7441, 8977, 7442, 4371, 3860, 8980, 2837, 8471, 3864, 4376, 3355, 7452, 2333, 2850, 803, 4899, 1828, 6949, 7461, 1318, 2855, 6439, 6951, 3368, 8488, 9002, 9004, 8495, 5424, 1330, 1844, 6453, 9527, 9017, 826, 1342, 1344, 9024, 1347, 5955, 9029, 1862, 4938, 3405, 849, 9557, 1878, 9558, 7511, 9559, 3416, 4954, 5978, 9564, 3933, 8542, 5474, 4964, 7012, 9573, 9062, 5480, 2921, 6505, 3946, 8042, 9580, 1389, 3437, 9069, 9582, 5488, 3953, 9074, 9075, 7028, 7541, 2934, 7031, 6008, 7544, 9596, 7037, 1406, 3967, 9599, 4993, 9089, 9603, 900, 2951, 7047, 9095, 907, 6540, 7053, 9104, 8593, 6546, 3988, 7061, 406, 6550, 2458, 2459, 5532, 3997, 5536, 9120, 3489, 2978, 420, 6052, 9636, 933, 4005, 6055, 8615, 5544, 4011, 2476, 8620, 8110, 1455, 3503, 9135, 5552, 9136, 4018, 9138, 5557, 8118, 5560, 7097, 5562, 1468, 9149, 3007, 9151, 6080, 3009, 3012, 5065, 972, 2511, 9168, 2005, 2008, 7132, 6625, 490, 9707, 2543, 9711, 497, 6647, 1018, 4603, 1533, 3583, 4095]
# set2 = set(list2)
#
# cha = set2 - set1 # 3299
# print(cha)